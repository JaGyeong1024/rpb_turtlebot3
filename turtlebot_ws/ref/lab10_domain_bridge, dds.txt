Robot Programming
Lab 10: domain bridge, dds
김민규

kmk6061602@cbnu.ac.kr

Project #2

Project Schedule
Project #2 : 12/15 19:00
12/9 ~ 12/15 수업시간 제외 사용 가능

domain bridge

domain bridge
서로다른 ROS2 Domain ID를 가진 격리된 ROS2 네트워크 간에 특정 통신 중계

Install
sudo apt update
sudo apt install ros-$ROS_DISTRO-domain-bridge

Usage
#config/my_robot_bridge.yaml
name: my_robot_bridge
from_domain: 10  # 로봇 내부 도메인
to_domain: 0     # 관제 시스템 도메인

topics:
    # 기본 브리징 (10 -> 0)
    odom:
        type: nav_msgs/msg/Odometry
    
    scan:
        type: sensor_msgs/msg/LaserScan
        # 토픽 이름 변경
        remap : robot_1/scan
        # QOS 설정 덮어쓰기
        qos : 
            reliability: best_effort
            history: keep_last
            depth: 1
    

    cmd_vel:
        type: geometry_msgs/msg/Twist
        # 양방향 브리징
        bidirectional: true
    
    chatter:
        # 10 -> 4로 변경
        type: example_interfaces/msg/String
        to_domain: 4
    
    talker:
        # 0 -> 10으로 변경
        type: example_interfaces/msg/String
        reversed: true

Usage
ros2 run domain_bridge domain_bridge examples/example_bridge_config.yaml

ros2 run domain_bridge domain_bridge --from 7 --to 8 examples/example_bridge_config.yaml # override domain IDs

ros2 launch domain_bridge domain_bridge.launch.xml config:=examples/example_bridge_config.yaml


DDS

Install some other DDS
sudo apt install ros-$ROS_DISTRO-rmw-cyclonedds-cpp
sudo apt install ros-$ROS_DISTRO-rmw-gurumdds-cpp
sudo apt install ros-$ROS_DISTRO-rmw-connextdds
sudo apt install ros-$ROS_DISTRO-rmw-zenoh-cpp
export RMW_IMPLEMENTATION=rmw_fastrtps_cpp
export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp
export RMW_IMPLEMENTATION=rmw_gurumdds_cpp
export RMW_IMPLEMENTATION=rmw_connextdds
export RMW_IMPLEMENTATION=rmw_zenoh_cpp

Check DDS
ros2 doctor --report | grep "middleware name"
